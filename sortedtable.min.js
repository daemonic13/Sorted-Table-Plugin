(function(g){g.fn.sortedtable=function(h){var i=this,h=h||{},h=g.extend({},{"int":function(e,f){return parseInt(e,10)-parseInt(f,10)},"float":function(e,f){return parseFloat(e)-parseFloat(f)},string:function(e,f){return e<f?-1:e>f?1:0}},h);i.delegate("th","click",function(){var e=i.find("tbody tr"),f=g(this).index(),a=g(this).attr("class"),c=null,j=g(this);if(a){for(var a=a.split(/\s+/),b=0;b<a.length;b++)if(-1!=a[b].search("type-")){c=a[b];break}c=c?c.split("-")[1]:"string"}if(!c)return!1;a=h[c];column=[];e.each(function(a,c){var b=g(c).children().eq(f),b=b.attr("data-order-by")||b.text();column.push(b)});var d=column,c=d.slice(0),b=d.slice(0).reverse(),d=d.slice(0).sort(a);if(c&&d&&!(c<d||d<c)||b&&d&&!(b<d||d<b)){column.reverse();a=[];for(f=column.length-1;0<=f;f--)a.push(f)}else{for(var c=column,a=c.slice(0).sort(a),b=[],k=d=0;k<c.length;k++){for(d=g.inArray(c[k],a);-1!=g.inArray(d,b);)d++;b.push(d)}a=b}c=e.slice(0);for(b=0;b<a.length;b++)newIndex=a[b],c[newIndex]=e[b];e=g(c);j.siblings().find(".esorticon").remove();a=j.find(".esorticon");0<a.length?a.toggleClass("ui-icon-triangle-1-s ui-icon-triangle-1-n"):(a=g(document.createElement("span")),a.addClass("ui-icon ui-icon-triangle-1-s esorticon"),a.css({display:"inline-block",verticalAlign:"middle"}),j.append(a));i.find("tbody").append(e)})}})(jQuery);