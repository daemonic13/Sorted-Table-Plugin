(function(c){c.fn.sortedtable=function(l){var i=this,g=c.extend({},c.fn.sortedtable.defaults,l);sortFns=c.extend({},{"int":function(c,f){return parseInt(c,10)-parseInt(f,10)},"float":function(c,f){return parseFloat(c)-parseFloat(f)},string:function(c,f){return c<f?-1:c>f?1:0}},g.sortFns);i.delegate("th","click",function(){var h=i.find("tbody tr"),f=c(this).index(),a=c(this).attr("class"),d=null,j=c(this);if(a){for(var a=a.split(/\s+/),b=0;b<a.length;b++)if(-1!=a[b].search("type-")){d=a[b];break}d=d?d.split("-")[1]:"string"}if(!d)return!1;a=sortFns[d];column=[];h.each(function(a,d){var b=c(d).children().eq(f),b=b.attr("data-order-by")||b.text();column.push(b)});var e=column,d=e.slice(0),b=e.slice(0).reverse(),e=e.slice(0).sort(a);if(d&&e&&!(d<e||e<d)||b&&e&&!(b<e||e<b)){column.reverse();a=[];for(f=column.length-1;0<=f;f--)a.push(f)}else{for(var d=column,a=d.slice(0).sort(a),b=[],k=e=0;k<d.length;k++){for(e=c.inArray(d[k],a);-1!=c.inArray(e,b);)e++;b.push(e)}a=b}d=h.slice(0);for(b=0;b<a.length;b++)newIndex=a[b],d[newIndex]=h[b];h=c(d);g.useicon&&(j.siblings().find(".sorticon").remove(),a=j.find(".sorticon"),0<a.length?a.toggleClass(g.iconascending+" "+g.icondescending):(a=c(document.createElement("span")),a.addClass("ui-icon sorticon").addClass(g.icondescending),a.css({display:"inline-block",verticalAlign:"middle"}),j.append(a)));i.find("tbody").append(h)})};c.fn.sortedtable.defaults={icondescending:"ui-icon-triangle-1-s",iconascending:"ui-icon-triangle-1-n",useicon:!0,sortFns:{}}})(jQuery);